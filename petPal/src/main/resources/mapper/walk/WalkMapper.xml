<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="walk.dao.WalkDAO">
	
		<insert id="insertWalk" parameterType="walkVO">
			INSERT INTO HR.TBL_WALK
			(NUM, 
			USER_ID, 
			TITLE,  
			LOCATION, 
			"DATE", 
			WALK_TIME, 
			WALK_HOUR, 
			WALK_MINUTE, 
			CONTENT,
			REG_DATE,
			THUMB,
			AGE,
			BREED)
			VALUES(
			SEQ_WALK.NEXTVAL, 
			#{user_id}, 
			#{title}, 
			#{location}, 
			#{date}, 
			#{walk_time}, 
			#{walk_hour}, 
			#{walk_minute}, 
			#{content},
			SYSDATE,
			#{thumb},
			#{age},
			#{breed})
			
		</insert>
		
		<select id="selectWalkList" resultType="walkVO">
		<![CDATA[
			SELECT
			NUM, 
			USER_ID, 
			TITLE, 
			LOCATION, 
			TO_CHAR("DATE", 'YYYY-MM-DD') "DATE", 
			WALK_TIME, 
			WALK_HOUR, 
			WALK_MINUTE, 
			CONTENT,
			REG_DATE,
			THUMB,
			AGE,
			BREED
			FROM (SELECT * FROM TBL_WALK WHERE NUM > 0 ORDER BY NUM DESC, REG_DATE DESC) WHERE ROWNUM BETWEEN 1 AND 20
		]]>
		</select>
		
		<select id="scrollDown" parameterType="_int" resultType="walkVO">
		<![CDATA[
			SELECT
			NUM, 
			USER_ID, 
			TITLE, 
			LOCATION, 
			TO_CHAR("DATE", 'YYYY-MM-DD') "DATE", 
			WALK_TIME, 
			WALK_HOUR, 
			WALK_MINUTE, 
			CONTENT,
			REG_DATE,
			THUMB,
			AGE,
			BREED
			FROM TBL_WALK WHERE NUM <= #{num} AND NUM > #{num}-20 ORDER BY NUM DESC, REG_DATE DESC
		]]>
		</select>
		
		<select id="getWalk" parameterType="_int" resultType="walkVO">
			SELECT
			NUM, 
			USER_ID, 
			TITLE, 
			LOCATION, 
			TO_CHAR("DATE", 'YYYY-MM-DD') "DATE", 
			WALK_TIME, 
			WALK_HOUR, 
			WALK_MINUTE, 
			CONTENT,
			REG_DATE,
			THUMB,
			AGE,
			BREED
			FROM TBL_WALK WHERE NUM = #{num}
		</select>
	
	</mapper>
